<?xml version="1.0" ?>
<sql xmlns="http://ing.com/vortex/sql/grammar" xmlns:c="http://ing.com/vortex/sql/comments" grammar="oracle" path="dsa/procedures/add_log_item.sql" numlines="44">
<sql-script><unit-statement><create-procedure-body><t>create</t><c:SPACES> </c:SPACES><t>or</t><c:SPACES> </c:SPACES><t>replace</t><c:SPACES> </c:SPACES><t>PROCEDURE</t><c:SPACES> </c:SPACES><procedure-name><identifier><id-expression><regular-id><t>ADD_LOG_ITEM</t><c:SPACES>
</c:SPACES></regular-id></id-expression></identifier></procedure-name><t>(</t><c:SPACES>
  </c:SPACES><parameter><parameter-name><identifier><id-expression><regular-id><t>v_detail_level</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></parameter-name><t>IN</t><c:SPACES> </c:SPACES><type-spec><datatype><native-datatype-element><t>NUMBER</t></native-datatype-element></datatype></type-spec></parameter><t>,</t><c:SPACES>
  </c:SPACES><parameter><parameter-name><identifier><id-expression><regular-id><t>v_date</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></parameter-name><t>IN</t><c:SPACES> </c:SPACES><type-spec><datatype><native-datatype-element><t>DATE</t></native-datatype-element></datatype></type-spec></parameter><t>,</t><c:SPACES>
  </c:SPACES><parameter><parameter-name><identifier><id-expression><regular-id><t>v_log_descr</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></parameter-name><t>IN</t><c:SPACES> </c:SPACES><type-spec><datatype><native-datatype-element><t>VARCHAR2</t></native-datatype-element></datatype></type-spec></parameter><t>,</t><c:SPACES>
  </c:SPACES><parameter><parameter-name><identifier><id-expression><regular-id><t>v_activity_code</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></parameter-name><t>IN</t><c:SPACES> </c:SPACES><type-spec><datatype><native-datatype-element><t>VARCHAR2</t></native-datatype-element></datatype></type-spec></parameter><t>,</t><c:SPACES>
  </c:SPACES><parameter><parameter-name><identifier><id-expression><regular-id><t>v_action_code</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></parameter-name><t>IN</t><c:SPACES> </c:SPACES><type-spec><datatype><native-datatype-element><t>VARCHAR2</t></native-datatype-element></datatype></type-spec></parameter><t>,</t><c:SPACES>
  </c:SPACES><parameter><parameter-name><identifier><id-expression><regular-id><t>v_system_id</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></parameter-name><t>IN</t><c:SPACES> </c:SPACES><type-spec><datatype><native-datatype-element><t>VARCHAR2</t><c:SPACES>
</c:SPACES></native-datatype-element></datatype></type-spec></parameter><t>)</t><c:SPACES>
</c:SPACES><t>AS</t><c:SPACES>
</c:SPACES><c:MULTI_LINE_COMMENT>/**
Add Log Item
*
* @param V_DETAIL_LEVEL      NUMBER() IN
* @param V_SYSTEM_ID      VARCHAR2() IN
* @param V_ACTION_CODE      VARCHAR2() IN
* @param V_ACTIVITY_CODE      VARCHAR2() IN
* @param V_LOG_DESCR      VARCHAR2() IN
* @param V_DATE      DATE IN
*/</c:MULTI_LINE_COMMENT><c:SPACES>

   </c:SPACES><seq-of-declare-specs><declare-spec><variable-declaration><identifier><id-expression><regular-id><t>iv_detail_level</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier><type-spec><datatype><native-datatype-element><t>NUMBER</t></native-datatype-element><precision-part><t>(</t><numeric><t>12</t></numeric><t>)</t><c:SPACES> </c:SPACES></precision-part></datatype></type-spec><default-value-part><t>:=</t><c:SPACES> </c:SPACES><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>v_detail_level</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression></default-value-part><t>;</t><c:SPACES>

</c:SPACES></variable-declaration></declare-spec></seq-of-declare-specs><body><t>BEGIN</t><c:SPACES>

   </c:SPACES><c:MULTI_LINE_COMMENT>/**********************************************************
   *Procedure  Name: add_log_item
   *Database: vortex2
   *Server: S1_ICRM_AM_D
   *SQL-BuilderR3.8
   *File Path:
   * C:\vortex\step1\add_log_item.sql
   *********************************************************/</c:MULTI_LINE_COMMENT><c:SPACES>
   </c:SPACES><seq-of-statements><statement><if-statement><t>IF</t><c:SPACES> </c:SPACES><condition><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>iv_detail_level</t><c:SPACES> </c:SPACES></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression><t>IS</t><c:SPACES> </c:SPACES><t>NULL</t><c:SPACES> </c:SPACES></logical-expression></expression></condition><t>THEN</t><c:SPACES>
    </c:SPACES><seq-of-statements><statement><assignment-statement><general-element><general-element-part><id-expression><regular-id><t>iv_detail_level</t><c:SPACES> </c:SPACES></regular-id></id-expression></general-element-part></general-element><t>:=</t><c:SPACES> </c:SPACES><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><constant><numeric><t>1</t><c:SPACES> </c:SPACES></numeric></constant></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression></assignment-statement></statement><t>;</t><c:SPACES>
   </c:SPACES></seq-of-statements><t>END</t><c:SPACES> </c:SPACES><t>IF</t></if-statement></statement><t>;</t><c:SPACES>
   </c:SPACES><statement><sql-statement><data-manipulation-language-statements><insert-statement><t>INSERT</t><c:SPACES> </c:SPACES><single-table-insert><insert-into-clause><t>INTO</t><c:SPACES> </c:SPACES><general-table-ref><dml-table-expression-clause><tableview-name><identifier><id-expression><regular-id><non-reserved-keywords-pre12c><t>log</t><c:SPACES>
     </c:SPACES></non-reserved-keywords-pre12c></regular-id></id-expression></identifier></tableview-name></dml-table-expression-clause></general-table-ref><paren-column-list><t>(</t><c:SPACES> </c:SPACES><column-list><column-name><identifier><id-expression><regular-id><t>detail_level</t></regular-id></id-expression></identifier></column-name><t>,</t><c:SPACES> </c:SPACES><column-name><identifier><id-expression><regular-id><t>log_date</t></regular-id></id-expression></identifier></column-name><t>,</t><c:SPACES> </c:SPACES><column-name><identifier><id-expression><regular-id><t>log_descr</t></regular-id></id-expression></identifier></column-name><t>,</t><c:SPACES> </c:SPACES><column-name><identifier><id-expression><regular-id><t>activity_code</t></regular-id></id-expression></identifier></column-name><t>,</t><c:SPACES> </c:SPACES><column-name><identifier><id-expression><regular-id><t>result_code</t></regular-id></id-expression></identifier></column-name><t>,</t><c:SPACES> </c:SPACES><column-name><identifier><id-expression><regular-id><t>system_id</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></column-name></column-list><t>)</t><c:SPACES>
     </c:SPACES></paren-column-list></insert-into-clause><values-clause><t>VALUES</t><c:SPACES> </c:SPACES><t>(</t><c:SPACES> </c:SPACES><expressions><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>iv_detail_level</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression><t>,</t><c:SPACES> </c:SPACES><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>v_date</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression><t>,</t><c:SPACES> </c:SPACES><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>v_log_descr</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression><t>,</t><c:SPACES> </c:SPACES><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>v_activity_code</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression><t>,</t><c:SPACES> </c:SPACES><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>v_action_code</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression><t>,</t><c:SPACES> </c:SPACES><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>v_system_id</t><c:SPACES> </c:SPACES></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression></expressions><t>)</t></values-clause></single-table-insert></insert-statement></data-manipulation-language-statements></sql-statement></statement><t>;</t><c:SPACES>

</c:SPACES></seq-of-statements><t>EXCEPTION</t><c:SPACES> </c:SPACES><exception-handler><t>WHEN</t><c:SPACES> </c:SPACES><exception-name><identifier><id-expression><regular-id><t>OTHERS</t><c:SPACES> </c:SPACES></regular-id></id-expression></identifier></exception-name><t>THEN</t><c:SPACES> </c:SPACES><seq-of-statements><statement><function-call><routine-name><identifier><id-expression><regular-id><t>utils</t></regular-id></id-expression></identifier><t>.</t><id-expression><regular-id><t>handleerror</t></regular-id></id-expression></routine-name><function-argument><t>(</t><arguments><argument><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>SQLCODE</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression></argument><t>,</t><argument><expression><logical-expression><multiset-expression><relational-expression><compound-expression><concatenation><model-expression><unary-expression><atom><general-element><general-element-part><id-expression><regular-id><t>SQLERRM</t></regular-id></id-expression></general-element-part></general-element></atom></unary-expression></model-expression></concatenation></compound-expression></relational-expression></multiset-expression></logical-expression></expression></argument></arguments><t>)</t></function-argument></function-call></statement><t>;</t><c:SPACES>
</c:SPACES></seq-of-statements></exception-handler><t>END</t></body><t>;</t><c:SPACES>
</c:SPACES></create-procedure-body></unit-statement><sql-plus-command><t>/</t><c:SPACES>
</c:SPACES></sql-plus-command><sql-plus-command><t>show</t><c:SPACES> </c:SPACES><t>error</t></sql-plus-command><t>;</t><c:SPACES>
</c:SPACES></sql-script>
</sql>