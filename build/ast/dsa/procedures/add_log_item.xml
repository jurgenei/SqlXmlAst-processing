<?xml version="1.0" ?>
<sql grammar="oracle" path="dsa/procedures/add_log_item.sql" numlines="44">
  <sql-script>
    <unit-statement>
      <create-procedure-body>
        <t>create</t>
        <t>or</t>
        <t>replace</t>
        <t>PROCEDURE</t>
        <procedure-name>
          <identifier>
            <id-expression>
              <regular-id>
                <t>ADD_LOG_ITEM</t>
              </regular-id>
            </id-expression>
          </identifier>
        </procedure-name>
        <t>(</t>
        <parameter>
          <parameter-name>
            <identifier>
              <id-expression>
                <regular-id>
                  <t>v_detail_level</t>
                </regular-id>
              </id-expression>
            </identifier>
          </parameter-name>
          <t>IN</t>
          <type-spec>
            <datatype>
              <native-datatype-element>
                <t>NUMBER</t>
              </native-datatype-element>
            </datatype>
          </type-spec>
        </parameter>
        <t>,</t>
        <parameter>
          <parameter-name>
            <identifier>
              <id-expression>
                <regular-id>
                  <t>v_date</t>
                </regular-id>
              </id-expression>
            </identifier>
          </parameter-name>
          <t>IN</t>
          <type-spec>
            <datatype>
              <native-datatype-element>
                <t>DATE</t>
              </native-datatype-element>
            </datatype>
          </type-spec>
        </parameter>
        <t>,</t>
        <parameter>
          <parameter-name>
            <identifier>
              <id-expression>
                <regular-id>
                  <t>v_log_descr</t>
                </regular-id>
              </id-expression>
            </identifier>
          </parameter-name>
          <t>IN</t>
          <type-spec>
            <datatype>
              <native-datatype-element>
                <t>VARCHAR2</t>
              </native-datatype-element>
            </datatype>
          </type-spec>
        </parameter>
        <t>,</t>
        <parameter>
          <parameter-name>
            <identifier>
              <id-expression>
                <regular-id>
                  <t>v_activity_code</t>
                </regular-id>
              </id-expression>
            </identifier>
          </parameter-name>
          <t>IN</t>
          <type-spec>
            <datatype>
              <native-datatype-element>
                <t>VARCHAR2</t>
              </native-datatype-element>
            </datatype>
          </type-spec>
        </parameter>
        <t>,</t>
        <parameter>
          <parameter-name>
            <identifier>
              <id-expression>
                <regular-id>
                  <t>v_action_code</t>
                </regular-id>
              </id-expression>
            </identifier>
          </parameter-name>
          <t>IN</t>
          <type-spec>
            <datatype>
              <native-datatype-element>
                <t>VARCHAR2</t>
              </native-datatype-element>
            </datatype>
          </type-spec>
        </parameter>
        <t>,</t>
        <parameter>
          <parameter-name>
            <identifier>
              <id-expression>
                <regular-id>
                  <t>v_system_id</t>
                </regular-id>
              </id-expression>
            </identifier>
          </parameter-name>
          <t>IN</t>
          <type-spec>
            <datatype>
              <native-datatype-element>
                <t>VARCHAR2</t>
              </native-datatype-element>
            </datatype>
          </type-spec>
        </parameter>
        <t>)</t>
        <t>AS</t>
        <seq-of-declare-specs>
          <declare-spec>
            <variable-declaration>
              <identifier>
                <id-expression>
                  <regular-id>
                    <t>iv_detail_level</t>
                  </regular-id>
                </id-expression>
              </identifier>
              <type-spec>
                <datatype>
                  <native-datatype-element>
                    <t>NUMBER</t>
                  </native-datatype-element>
                  <precision-part>
                    <t>(</t>
                    <numeric>
                      <t>12</t>
                    </numeric>
                    <t>)</t>
                  </precision-part>
                </datatype>
              </type-spec>
              <default-value-part>
                <t>:=</t>
                <expression>
                  <logical-expression>
                    <multiset-expression>
                      <relational-expression>
                        <compound-expression>
                          <concatenation>
                            <model-expression>
                              <unary-expression>
                                <atom>
                                  <general-element>
                                    <general-element-part>
                                      <id-expression>
                                        <regular-id>
                                          <t>v_detail_level</t>
                                        </regular-id>
                                      </id-expression>
                                    </general-element-part>
                                  </general-element>
                                </atom>
                              </unary-expression>
                            </model-expression>
                          </concatenation>
                        </compound-expression>
                      </relational-expression>
                    </multiset-expression>
                  </logical-expression>
                </expression>
              </default-value-part>
              <t>;</t>
            </variable-declaration>
          </declare-spec>
        </seq-of-declare-specs>
        <body>
          <t>BEGIN</t>
          <seq-of-statements>
            <statement>
              <if-statement>
                <t>IF</t>
                <condition>
                  <expression>
                    <logical-expression>
                      <multiset-expression>
                        <relational-expression>
                          <compound-expression>
                            <concatenation>
                              <model-expression>
                                <unary-expression>
                                  <atom>
                                    <general-element>
                                      <general-element-part>
                                        <id-expression>
                                          <regular-id>
                                            <t>iv_detail_level</t>
                                          </regular-id>
                                        </id-expression>
                                      </general-element-part>
                                    </general-element>
                                  </atom>
                                </unary-expression>
                              </model-expression>
                            </concatenation>
                          </compound-expression>
                        </relational-expression>
                      </multiset-expression>
                      <t>IS</t>
                      <t>NULL</t>
                    </logical-expression>
                  </expression>
                </condition>
                <t>THEN</t>
                <seq-of-statements>
                  <statement>
                    <assignment-statement>
                      <general-element>
                        <general-element-part>
                          <id-expression>
                            <regular-id>
                              <t>iv_detail_level</t>
                            </regular-id>
                          </id-expression>
                        </general-element-part>
                      </general-element>
                      <t>:=</t>
                      <expression>
                        <logical-expression>
                          <multiset-expression>
                            <relational-expression>
                              <compound-expression>
                                <concatenation>
                                  <model-expression>
                                    <unary-expression>
                                      <atom>
                                        <constant>
                                          <numeric>
                                            <t>1</t>
                                          </numeric>
                                        </constant>
                                      </atom>
                                    </unary-expression>
                                  </model-expression>
                                </concatenation>
                              </compound-expression>
                            </relational-expression>
                          </multiset-expression>
                        </logical-expression>
                      </expression>
                    </assignment-statement>
                  </statement>
                  <t>;</t>
                </seq-of-statements>
                <t>END</t>
                <t>IF</t>
              </if-statement>
            </statement>
            <t>;</t>
            <statement>
              <sql-statement>
                <data-manipulation-language-statements>
                  <insert-statement>
                    <t>INSERT</t>
                    <single-table-insert>
                      <insert-into-clause>
                        <t>INTO</t>
                        <general-table-ref>
                          <dml-table-expression-clause>
                            <tableview-name>
                              <identifier>
                                <id-expression>
                                  <regular-id>
                                    <non-reserved-keywords-pre12c>
                                      <t>log</t>
                                    </non-reserved-keywords-pre12c>
                                  </regular-id>
                                </id-expression>
                              </identifier>
                            </tableview-name>
                          </dml-table-expression-clause>
                        </general-table-ref>
                        <paren-column-list>
                          <t>(</t>
                          <column-list>
                            <column-name>
                              <identifier>
                                <id-expression>
                                  <regular-id>
                                    <t>detail_level</t>
                                  </regular-id>
                                </id-expression>
                              </identifier>
                            </column-name>
                            <t>,</t>
                            <column-name>
                              <identifier>
                                <id-expression>
                                  <regular-id>
                                    <t>log_date</t>
                                  </regular-id>
                                </id-expression>
                              </identifier>
                            </column-name>
                            <t>,</t>
                            <column-name>
                              <identifier>
                                <id-expression>
                                  <regular-id>
                                    <t>log_descr</t>
                                  </regular-id>
                                </id-expression>
                              </identifier>
                            </column-name>
                            <t>,</t>
                            <column-name>
                              <identifier>
                                <id-expression>
                                  <regular-id>
                                    <t>activity_code</t>
                                  </regular-id>
                                </id-expression>
                              </identifier>
                            </column-name>
                            <t>,</t>
                            <column-name>
                              <identifier>
                                <id-expression>
                                  <regular-id>
                                    <t>result_code</t>
                                  </regular-id>
                                </id-expression>
                              </identifier>
                            </column-name>
                            <t>,</t>
                            <column-name>
                              <identifier>
                                <id-expression>
                                  <regular-id>
                                    <t>system_id</t>
                                  </regular-id>
                                </id-expression>
                              </identifier>
                            </column-name>
                          </column-list>
                          <t>)</t>
                        </paren-column-list>
                      </insert-into-clause>
                      <values-clause>
                        <t>VALUES</t>
                        <t>(</t>
                        <expressions>
                          <expression>
                            <logical-expression>
                              <multiset-expression>
                                <relational-expression>
                                  <compound-expression>
                                    <concatenation>
                                      <model-expression>
                                        <unary-expression>
                                          <atom>
                                            <general-element>
                                              <general-element-part>
                                                <id-expression>
                                                  <regular-id>
                                                    <t>iv_detail_level</t>
                                                  </regular-id>
                                                </id-expression>
                                              </general-element-part>
                                            </general-element>
                                          </atom>
                                        </unary-expression>
                                      </model-expression>
                                    </concatenation>
                                  </compound-expression>
                                </relational-expression>
                              </multiset-expression>
                            </logical-expression>
                          </expression>
                          <t>,</t>
                          <expression>
                            <logical-expression>
                              <multiset-expression>
                                <relational-expression>
                                  <compound-expression>
                                    <concatenation>
                                      <model-expression>
                                        <unary-expression>
                                          <atom>
                                            <general-element>
                                              <general-element-part>
                                                <id-expression>
                                                  <regular-id>
                                                    <t>v_date</t>
                                                  </regular-id>
                                                </id-expression>
                                              </general-element-part>
                                            </general-element>
                                          </atom>
                                        </unary-expression>
                                      </model-expression>
                                    </concatenation>
                                  </compound-expression>
                                </relational-expression>
                              </multiset-expression>
                            </logical-expression>
                          </expression>
                          <t>,</t>
                          <expression>
                            <logical-expression>
                              <multiset-expression>
                                <relational-expression>
                                  <compound-expression>
                                    <concatenation>
                                      <model-expression>
                                        <unary-expression>
                                          <atom>
                                            <general-element>
                                              <general-element-part>
                                                <id-expression>
                                                  <regular-id>
                                                    <t>v_log_descr</t>
                                                  </regular-id>
                                                </id-expression>
                                              </general-element-part>
                                            </general-element>
                                          </atom>
                                        </unary-expression>
                                      </model-expression>
                                    </concatenation>
                                  </compound-expression>
                                </relational-expression>
                              </multiset-expression>
                            </logical-expression>
                          </expression>
                          <t>,</t>
                          <expression>
                            <logical-expression>
                              <multiset-expression>
                                <relational-expression>
                                  <compound-expression>
                                    <concatenation>
                                      <model-expression>
                                        <unary-expression>
                                          <atom>
                                            <general-element>
                                              <general-element-part>
                                                <id-expression>
                                                  <regular-id>
                                                    <t>v_activity_code</t>
                                                  </regular-id>
                                                </id-expression>
                                              </general-element-part>
                                            </general-element>
                                          </atom>
                                        </unary-expression>
                                      </model-expression>
                                    </concatenation>
                                  </compound-expression>
                                </relational-expression>
                              </multiset-expression>
                            </logical-expression>
                          </expression>
                          <t>,</t>
                          <expression>
                            <logical-expression>
                              <multiset-expression>
                                <relational-expression>
                                  <compound-expression>
                                    <concatenation>
                                      <model-expression>
                                        <unary-expression>
                                          <atom>
                                            <general-element>
                                              <general-element-part>
                                                <id-expression>
                                                  <regular-id>
                                                    <t>v_action_code</t>
                                                  </regular-id>
                                                </id-expression>
                                              </general-element-part>
                                            </general-element>
                                          </atom>
                                        </unary-expression>
                                      </model-expression>
                                    </concatenation>
                                  </compound-expression>
                                </relational-expression>
                              </multiset-expression>
                            </logical-expression>
                          </expression>
                          <t>,</t>
                          <expression>
                            <logical-expression>
                              <multiset-expression>
                                <relational-expression>
                                  <compound-expression>
                                    <concatenation>
                                      <model-expression>
                                        <unary-expression>
                                          <atom>
                                            <general-element>
                                              <general-element-part>
                                                <id-expression>
                                                  <regular-id>
                                                    <t>v_system_id</t>
                                                  </regular-id>
                                                </id-expression>
                                              </general-element-part>
                                            </general-element>
                                          </atom>
                                        </unary-expression>
                                      </model-expression>
                                    </concatenation>
                                  </compound-expression>
                                </relational-expression>
                              </multiset-expression>
                            </logical-expression>
                          </expression>
                        </expressions>
                        <t>)</t>
                      </values-clause>
                    </single-table-insert>
                  </insert-statement>
                </data-manipulation-language-statements>
              </sql-statement>
            </statement>
            <t>;</t>
          </seq-of-statements>
          <t>EXCEPTION</t>
          <exception-handler>
            <t>WHEN</t>
            <exception-name>
              <identifier>
                <id-expression>
                  <regular-id>
                    <t>OTHERS</t>
                  </regular-id>
                </id-expression>
              </identifier>
            </exception-name>
            <t>THEN</t>
            <seq-of-statements>
              <statement>
                <function-call>
                  <routine-name>
                    <identifier>
                      <id-expression>
                        <regular-id>
                          <t>utils</t>
                        </regular-id>
                      </id-expression>
                    </identifier>
                    <t>.</t>
                    <id-expression>
                      <regular-id>
                        <t>handleerror</t>
                      </regular-id>
                    </id-expression>
                  </routine-name>
                  <function-argument>
                    <t>(</t>
                    <arguments>
                      <argument>
                        <expression>
                          <logical-expression>
                            <multiset-expression>
                              <relational-expression>
                                <compound-expression>
                                  <concatenation>
                                    <model-expression>
                                      <unary-expression>
                                        <atom>
                                          <general-element>
                                            <general-element-part>
                                              <id-expression>
                                                <regular-id>
                                                  <t>SQLCODE</t>
                                                </regular-id>
                                              </id-expression>
                                            </general-element-part>
                                          </general-element>
                                        </atom>
                                      </unary-expression>
                                    </model-expression>
                                  </concatenation>
                                </compound-expression>
                              </relational-expression>
                            </multiset-expression>
                          </logical-expression>
                        </expression>
                      </argument>
                      <t>,</t>
                      <argument>
                        <expression>
                          <logical-expression>
                            <multiset-expression>
                              <relational-expression>
                                <compound-expression>
                                  <concatenation>
                                    <model-expression>
                                      <unary-expression>
                                        <atom>
                                          <general-element>
                                            <general-element-part>
                                              <id-expression>
                                                <regular-id>
                                                  <t>SQLERRM</t>
                                                </regular-id>
                                              </id-expression>
                                            </general-element-part>
                                          </general-element>
                                        </atom>
                                      </unary-expression>
                                    </model-expression>
                                  </concatenation>
                                </compound-expression>
                              </relational-expression>
                            </multiset-expression>
                          </logical-expression>
                        </expression>
                      </argument>
                    </arguments>
                    <t>)</t>
                  </function-argument>
                </function-call>
              </statement>
              <t>;</t>
            </seq-of-statements>
          </exception-handler>
          <t>END</t>
        </body>
        <t>;</t>
      </create-procedure-body>
    </unit-statement>
    <sql-plus-command>
      <t>/</t>
    </sql-plus-command>
    <sql-plus-command>
      <t>show</t>
      <t>error</t>
    </sql-plus-command>
    <t>;</t>
    <t>&lt;EOF&gt;</t>
  </sql-script>
</sql>